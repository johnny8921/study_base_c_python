### 2. Программирование на С.

#### Теория

- Введение в С.
- Синтаксис и семантика С.
- Функции в С.
- Структуры и массивы.
- Указатели и работа с ними.

#### Практика

- Запуск первой программы. Написание простейших программ АСУ ТП.

### Введение в С.

**Кто знает C?**

**Что такое Си?**

**Си - компилируемый статически типизированный язык программирования общего назначения, разработанный в 1969—1973 годах
сотрудником Bell Labs Деннисом Ритчи как развитие языка Би.**

Попробуем разобраться что тут написано:

С названием понятно. Разрабы не обладают дикой фантазией поэтому именовали язык подряд ))))

**Компилированный** — означает, что код сначала преобразуется в бинарный файл компилятором с машинным кодом, а дальше
уже запускается на машиине.
Это означает, что у вас должен быть компилятор под каждую машину на которой вы планируете это запустить. Это ОГРОМНЫЙ
геморрой всех программистов на С. У меня например стоит порядка 5-6 компиляторов для разных типов процессоров. Однако,
при этих сложностях мы получаем самую высокую производительность. Ваш код уже преобразован в машинный и работает с
максимальной скоростью. Есть еще быстрее — Ассемблер, но писать на нем — это отдельное поражение мозга. Я использую
ассемблер только как инструмент, что бы посмотреть что программа делает не так.

**Статически** — обозначает, что вся память в программе выделена статически. Все переменные четко раскиданы по памяти и
не могут занимать больше. В проектах на C на микроконтроллерах компилятор пишет в конце сколько занято какого вида
памяти. При написании на языке C я смело оставляю 0 свободных байт ОЗУ. Потому что выделение в процессе работы случайно
не произойдет. Вся пямять выделяется при запуске программы сразу.

**Типизированный** — означает, что каждая переменная имеет четкий размер определенный еще до компиляции. С одной стороны
это головная боль с 10 типа числовых данных, а еще компиляторы их по разному выделяют. А еще есть дерективы компилятору
строго указывающие размер в независимости от типа ядра. Опять головняк, но применение таких типов дает там четкое
выделение точного объема памяти и сокращение необходимого объема памяти.
Эти особенности разработки и являются и плюсами и минусами этого языка.
У языка С есть стандарты языка. Для С — С99. Не сложно догадаться, что это стандарт от 99 года. Тем не менее он
абсолютно жив сейчас и придерживаясь его написано просто огромное количество программ.

### Синтаксис

1. **Структура программы**:
    - Программа на языке C состоит из одной или нескольких функций.
    - Главная функция `main()` является точкой входа в программу.

2. **Типы данных**:
    - Основные типы данных: `int`, `float`, `double`, `char`, `void`.
    - Структуры данных: массивы, структуры, указатели.

3. **Операторы**:
    - Арифметические операторы: `+`, `-`, `*`, `/`, `%`.
    - Логические операторы: `&&`, `||`, `!`.
    - Условные операторы: `if`, `else`, `switch`.
    - Циклы: `for`, `while`, `do-while`.

4. **Функции**:
    - Функции могут принимать аргументы и возвращать значения.
    - Использование библиотечных функций (например, `printf()`, `scanf()`).

5. **Указатели**:
    - Указатели используются для работы с адресами памяти.
    - Операции с указателями: `&` (адрес), `*` (декремент).

6. **Массивы**:
    - Массивы фиксированного размера.
    - Доступ к элементам массива через индексацию.

7. **Структуры**:
    - Структуры позволяют объединять данные разных типов.
    - Обращение к полям структур через точку (`.`) или стрелку (`->`).

### Семантика

1. **Значения и переменные**:
    - Переменные хранят значения определенного типа.
    - Значения могут быть присвоены переменным с помощью оператора присваивания (`=`).

2. **Выражения**:
    - Выражения состоят из операндов и операторов.
    - Результат выражения может быть использован в других выражениях или присвоен переменной.

3. **Управление потоком выполнения**:
    - Условные конструкции (`if`, `else`) изменяют порядок выполнения кода в зависимости от условий.
    - Циклы (`for`, `while`, `do-while`) повторяют блок кода до тех пор, пока условие истинно.

4. **Функции**:
    - Функции выполняют определенные задачи и могут возвращать результат.
    - Параметры функций передаются по значению или по ссылке (через указатели).

5. **Область видимости**:
    - Переменные имеют локальную область видимости внутри функции.
    - Глобальные переменные доступны во всей программе.

6. **Побочные эффекты**:
    - Некоторые операции могут иметь побочные эффекты, например, модификация глобальных переменных.

Конечно! Вот примеры функций с названиями на английском языке:

### Функции

Функция в C — это блок кода, который выполняет определенную задачу. Она может принимать входные параметры и возвращать
результат.

**Синтаксис:**

```c
return_type function_name(parameters) {
    // body of the function
    return value;
}
```

Пример:

```c
int sum(int a, int b) {
    return a + b;
}
```

#### Параметры функции

Функции могут принимать параметры, которые передаются при вызове функции.

- **Positional parameters**: Parameters are passed in order.
- **Types of parameters**: Can be various data types (e.g., `int`, `float`, `char`).

Пример:

```c
void greeting(char *name) {
    printf("Hello, %s!\n", name);
}
```

#### Возвращаемые значения

Функции могут возвращать значения различных типов. Если функция не возвращает значение, ее тип указывается как `void`.

Пример:

```c
void no_return() {
    printf("This function does not return anything.\n");
}
```

#### Вызов функции

Функции вызываются с помощью их имени и передачи необходимых аргументов.

Пример:

```c
int main() {
    int x = 5, y = 10;
    int result = sum(x, y);
    printf("Sum: %d\n", result);
    return 0;
}
```

#### Передача значений и ссылок

- **Passing by value**: A copy of the value is passed to the function.
- **Passing by reference**: The address of the variable is passed through a pointer.

Пример передачи по ссылке:

```c
void increment(int *x) {
    (*x)++;
}

int main() {
    int num = 5;
    increment(&num);
    printf("Number after increment: %d\n", num);
    return 0;
}
```

#### Рекурсия

Функции могут вызывать сами себя, что называется рекурсией. Это полезно для решения задач, которые можно разбить на
более простые подзадачи.

Пример:

```c
int factorial(int n) {
    if (n == 0) {
        return 1;
    } else {
        return n * factorial(n - 1);
    }
}
```

#### Библиотечные функции

C предоставляет множество библиотечных функций, которые можно использовать в программах.
Например, `printf()`, `scanf()`, `strlen()` и другие.

Пример использования `printf()`:

```c
#include <stdio.h>

int main() {
    printf("Hello, world!\n");
    return 0;
}
```

#### Локальные и глобальные переменные

- **Локальные переменные**: Объявлены внутри функции и доступны только внутри этой функции.
- **Глобальные переменные**: Объявлены вне всех функций и доступны во всей программе.

Пример:

```c
int global_variable = 10;

void change_global() {
    global_variable++;
}

int main() {
    change_global();
    printf("Global variable: %d\n", global_variable);
    return 0;
}
```

### Указатели

Указатель — это переменная, которая хранит адрес другой переменной или объекта в памяти.

```c
int x = 10;
int *ptr;  // Объявление указателя на int
ptr = &x;  // Присвоение адреса переменной x указателю ptr
```

#### Декремент и инкремент

Декремент (`*`) используется для доступа к значению, на которое указывает указатель. Инкремент (`&`) используется для
получения адреса переменной.

```c
int x = 10;
int *ptr = &x;

printf("Value: %d\n", *ptr);  // Выведет 10
printf("Address: %p\n", ptr); // Выведет адрес x
```

#### Передача по ссылке

Указатели часто используются для передачи данных по ссылке, что позволяет модифицировать данные внутри функций.

```c
void increment(int *ptr) {
    (*ptr)++;
}

int main() {
    int x = 5;
    increment(&x);
    printf("Value after increment: %d\n", x);
    return 0;
}
```

### Массивы

Массивы в C — это коллекции элементов одного типа, расположенных в памяти подряд.

#### Определение массива

```c
int numbers[5] = {1, 2, 3, 4, 5};
```

#### Использование массива

```c
void print_array(int arr[], int size) {
    for (int i = 0; i < size; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");
}

int main() {
    int numbers[5] = {1, 2, 3, 4, 5};
    print_array(numbers, 5);
    return 0;
}
```

#### Указатели и массивы

В C массивы часто рассматриваются как указатели. Например:

```c
int numbers[5] = {1, 2, 3, 4, 5};
int *ptr = numbers;
printf("%d\n", *ptr);  // Выведет 1
```

### Структуры

Структуры в C позволяют объединять данные различных типов в один логический блок. Это полезно для организации сложных
данных, таких как записи о людях, автомобилях и т.д.

#### Определение структуры

```c
struct Person {
    char name[50];
    int age;
    float height;
};
```

#### Использование структуры

```c
struct Person person1 = {"John Doe", 30, 1.80};

void print_person(struct Person p) {
    printf("Name: %s\nAge: %d\nHeight: %.2f\n", p.name, p.age, p.height);
}

int main() {
    struct Person person1 = {"John Doe", 30, 1.80};
    print_person(person1);
    return 0;
}
```

#### Указатели на структуры

```c
struct Person *person_ptr = &person1;
printf("Name: %s\n", person_ptr->name);
```
### Практика

Такс… Начнем как и любые программисты с написания Hello World.

Написать HelloWorld для windows

Давайте Поставим задачу: У нас есть бочка с водой к ней подключен нагреватель для поддержания теплой воды. 
Мы пишем программу управления этим ТЭНом. 
У нас есть сигнал на управление тэном, показатель текущей температуры и уставка до которой нужно нагреть. Так же добавим в простом виде гистерезис для регулирования

В общем виде программа будет видеть так:
Описать программу для управления одним тэном

А теперь к нам пришел заказчик и хочет сделать управление на 2 бочки одним контроллером.
Хорошо. Добавим. Решим прямо в лоб:
Добавить код программы с дублированием переменных и двойным объемом кода.

Написали. Вроде бы лучше.
Снова пришел заказчик, говорит, что у него есть заказ на 4-х канальный контроллер.

Решать задачу в лоб уже сложнее )))
Превращаем каждую переменную в массив. Управляющая программа выполняется в цикле. Куча переменных с их индексами.

Все здорово, но вот заказчик пришел и говорит, что надо добавить еще несколько параметров. И мы начинаем добавлять
несколько массивов. По попути еще криво их именуем и пропускаем, и/или путаем местами.

Кромешный АД!!!

Вот здесь и пригодятся структуры - удобный иснтрумент для хранения данных. 
Ключевой особенностью в Си является создание массивов структур.

Давайте напишем структуру для нашего нагревателя

```Структура здесь должна быть```

Теперь перепишем код для одного нагревателя

```Исправленный код для одного```

А для двух?

```Исправленный код для двух```
а для тысячи? Просто меняем размерность нашего массива.
А давайте добавим новое поле: время старта для каджого поля?
Добавляем поле

Таким образом вы видите какой это мощный механизм хранения и работы с данными.
